// This tells Prisma how to generate the database client
generator client {
    provider = "prisma-client-js"
}

// This connects to your PostgreSQL database
datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// User table - stores user accounts and subscription info
model User {
    id           String   @id @default(cuid())
    email        String   @unique
    passwordHash String
    name         String?
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt

    // Stripe subscription fields
    stripeCustomerId     String? @unique
    stripeSubscriptionId String? @unique
    subscriptionTier     String  @default("free") // free, basic, plus, premium, pro
    subscriptionStatus   String  @default("active")

    // Download tracking
    downloadsThisMonth Int      @default(0)
    lastResetDate      DateTime @default(now())

    @@map("users") // Actual table name in database
}
